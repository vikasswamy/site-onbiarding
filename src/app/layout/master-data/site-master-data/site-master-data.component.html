
    <div class="row glass-row">
        <div class="col-lg-12 col-md-6 col-sm-12">
            <div class="card glass-card">
        
                <div class="card-body" style=" width: 100%;
                 height: calc(34rem)">
                   <table mat-table [dataSource]="data" multiTemplateDataRows matSort class="mat-elevation-z8">
                    <ng-container [matColumnDef]="column" *ngFor="let column of columnsToDisplay">
                        <th mat-header-cell *matHeaderCellDef class="column-name"> {{column}} </th>
                        <td mat-cell *matCellDef="let facility"> {{facility[column]}} </td>
                    </ng-container>
                
                    <ng-container matColumnDef="expandedDetail">
                        <td mat-cell *matCellDef="let facility" [attr.colspan]="columnsToDisplay.length">
                            <div class="example-element-detail" [@detailExpand]="facility?.expanded"  *ngIf="facility?.expanded">
                                <div style="width: 100%;">
                
                                    <table mat-table [dataSource]="facility.levels" multiTemplateDataRows matSort>
                                        <ng-container matColumnDef="{{innerColumn}}" *ngFor="let innerColumn of innerDisplayedColumns">
                                            <th mat-header-cell *matHeaderCellDef mat-sort-header> {{innerColumn}} </th>
                                            <td mat-cell *matCellDef="let levels"> {{levels[innerColumn]}} </td>
                                        </ng-container>
                
                                        <ng-container matColumnDef="expandedExpandedDetail">
                                            <td mat-cell *matCellDef="let levels" [attr.colspan]="innerInnerDisplayedColumns.length">
                                                <div class="example-element-detail" [@detailExpand]="levels?.expanded" *ngIf="levels?.expanded">
                                                    <div style="width: 100%;">
                
                                                        <table style="width: 100%;" #inneTables multiTemplateDataRows  mat-table #innrSort="matSort"
                                                            [dataSource]="levels?.spaces" matSort>
                                                            <ng-container matColumnDef="{{col}}" *ngFor="let col of innerInnerDisplayedColumns">
                                                                <th mat-header-cell *matHeaderCellDef mat-sort-header> {{col}} </th>
                                                                <td mat-cell *matCellDef="let spaces"> {{spaces[col]}} </td>
                                                            </ng-container>
                 
                                                            <ng-container matColumnDef="expandedExpandedExpandedDetail">
                                                                <td mat-cell *matCellDef="let spaces" [attr.colspan]="innerInnerInnerDisplayedColumns.length">
                                                                    <div class="example-element-detail" [@detailExpand]="spaces?.expanded" *ngIf="spaces?.expanded">
                                                                        <div style="width: 100%;">
                                    
                                                                            <table style="width: 100%;" #inneTables  multiTemplateDataRows mat-table #innrSort="matSort"
                                                                                [dataSource]="spaces?.Devices" matSort>
                                                                                <ng-container matColumnDef="{{col}}" *ngFor="let col of innerInnerInnerDisplayedColumns">
                                                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header> {{col}} </th>
                                                                                    <td mat-cell *matCellDef="let devices"> {{devices[col]}} </td>
                                                                                </ng-container>
                                    
                                    
                                                                                <tr mat-header-row *matHeaderRowDef="innerInnerInnerDisplayedColumns"></tr>
                                                                                <tr mat-row *matRowDef="let devices; columns: innerInnerInnerDisplayedColumns;">
                                                                                </tr>
                                                                                
                                                                            </table>
                                                                        </div>
                                                                    </div>
                                                                </td>
                                                            </ng-container> 

                
                                                            <tr mat-header-row *matHeaderRowDef="innerInnerDisplayedColumns"></tr> 
                                                            <tr mat-row *matRowDef="let spaces; columns: innerInnerDisplayedColumns;"  
                                                                 [class.example-element-row]="spaces.devices.length" [class.example-expanded-row]="spaces?.expanded" 
                                                                 (click)="spaces.expanded = !spaces?.expanded"> 
                                                            </tr> 
                                                             <tr mat-row *matRowDef="let row; columns: ['expandedExpandedExpandedDetail']" class="example-detail-row">  
                                                             </tr>   
                                                        </table>
                                                    </div>
                                                </div>
                                            </td>
                                        </ng-container>
                
                                        <tr mat-header-row *matHeaderRowDef="innerDisplayedColumns"></tr>
                                        <tr mat-row *matRowDef="let levels; columns: innerDisplayedColumns;"
                                            [class.example-element-row]="levels.spaces.length" [class.example-expanded-row]="levels?.expanded"
                                            (click)="levels.expanded = !levels?.expanded">
                                        </tr>
                                        <tr mat-row *matRowDef="let row; columns: ['expandedExpandedDetail']" class="example-detail-row"></tr>
                                           
                                    </table>
                                </div>
                            </div>
                        </td>
                    </ng-container>
                
                    <tr mat-header-row *matHeaderRowDef="columnsToDisplay"></tr>
                    <tr mat-row *matRowDef="let facility; columns: columnsToDisplay;"
                        [class.example-element-row]="facility.levels?.length" [class.example-expanded-row]="facility?.expanded"
                        (click)="facility.expanded = !facility?.expanded">
                    </tr>
                    <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
                </table>
                </div>
            </div>
        </div>
    </div>
